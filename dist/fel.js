(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=e.cache[r],o=s?s.exports:i();return o};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){t=r.normalize(t);if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function a(t){t=t.replace(/\/+$/,"");var n=r.normalize(t+"/package.json");if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},function(){var t={},n=typeof window!="undefined"?window:{},r=!1;e.define=function(i,s){!r&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),r=!0);var o=e._core[i]?"":e.modules.path().dirname(i),u=function(t){var n=e(t,o),r=e.cache[e.resolve(t,o)];return r&&r.parent===null&&(r.parent=a),n};u.resolve=function(t){return e.resolve(t,o)},u.modules=e.modules,u.define=e.define,u.cache=e.cache;var a={id:i,filename:i,exports:{},loaded:!1,parent:null};e.modules[i]=function(){return e.cache[i]=a,s.call(a.exports,u,a,a.exports,o,i,t,n),a.loaded=!0,a.exports}}}(),e.define("path",function(e,t,n,r,i,s,o){function u(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function a(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var f=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(u(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=f.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=f.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return f.exec(e)[3]||""}}),e.define("__browserify_process",function(e,t,n,r,i,s,o){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return window.setImmediate;if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),e.define("/lib/core/index.js",function(e,t,n,r,i,s,o){n.Application=e("./application").Application,n.Object=e("./types").Object,n.namespace=n.Object.namespace,n.SingletonObject=e("./types").SingletonObject,n.Singleton=e("./oop").Singleton,n.Class=e("./oop").Class}),e.define("/lib/core/application.js",function(e,t,n,r,i,s,o){var u=e("eventemitter2").EventEmitter2,a=e("../views").Viewer,f=e("./types").Object,l=e("./types").SingletonObject,c=e("../controllers").StateManager,h=l.extend({__classvars__:{classname:"Application"},start:function(e){var t=this;t.options={views:{templates:{},translations:{},lang:"ru",filters:{trans:function(e){return t.translator.translate(e)}}},events:{},states:{}},e&&(t.options=f.merge(t.options,e)),t.eventer=new u({wildcard:!0});for(ev in t.options.events)t.eventer.on(ev,t.options.events[ev]);t.eventer.emit("application.before_start",this),t.viewer=new a(t,t.options.views),t.state_manager=new c(t,t.options.states),t.state_manager.start(),t.eventer.emit("application.after_start",this)}});n.Application=h}),e.define("/node_modules/eventemitter2/package.json",function(e,t,n,r,i,s,o){t.exports={main:"./lib/eventemitter2.js"}}),e.define("/node_modules/eventemitter2/lib/eventemitter2.js",function(e,t,n,r,i,s,o){!function(e,t){function i(){this._events=new Object}function s(e){e&&(e.delimiter&&(this.delimiter=e.delimiter),e.wildcard&&(this.wildcard=e.wildcard),this.wildcard&&(this.listenerTree=new Object))}function o(e){this._events=new Object,s.call(this,e)}function u(e,t,n,r){if(!n)return[];var i=[],s,o,a,f,l,c,h,p=t.length,d=t[r],v=t[r+1];if(r===p&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),[n];for(s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return[n]}if(d==="*"||d==="**"||n[d]){if(d==="*"){for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(i=i.concat(u(e,t,n[a],r+1)));return i}if(d==="**"){h=r+1===p||r+2===p&&v==="*",h&&n._listeners&&(i=i.concat(u(e,t,n,p)));for(a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(a==="*"||a==="**"?(n[a]._listeners&&!h&&(i=i.concat(u(e,t,n[a],p))),i=i.concat(u(e,t,n[a],r))):a===v?i=i.concat(u(e,t,n[a],r+2)):i=i.concat(u(e,t,n[a],r)));return i}i=i.concat(u(e,t,n[d],r+1))}f=n["*"],f&&u(e,t,f,r+1),l=n["**"];if(l)if(r<p){l._listeners&&u(e,t,l,p);for(a in l)a!=="_listeners"&&l.hasOwnProperty(a)&&(a===v?u(e,t,l[a],r+2):a===d?u(e,t,l[a],r+1):(c={},c[a]=l[a],u(e,t,{"**":c},r+1)))}else l._listeners?u(e,t,l,p):l["*"]&&l["*"]._listeners&&u(e,t,l["*"],p);return i}function a(e,t){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var i=0,s=e.length;i+1<s;i++)if(e[i]==="**"&&e[i+1]==="**")return;var o=this.listenerTree,u=e.shift();while(u){o[u]||(o[u]=new Object),o=o[u];if(e.length===0){if(!o._listeners)o._listeners=t;else if(typeof o._listeners=="function")o._listeners=[o._listeners,t];else if(n(o._listeners)){o._listeners.push(t);if(!o._listeners.warned){var a=r;typeof this._events.maxListeners!="undefined"&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}return!0}u=e.shift()}return!0}var n=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},r=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function i(){--t===0&&r.off(e,i),n.apply(this,arguments)}var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},o.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if(e==="newListener"&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];for(r=0,t=this._all.length;r<t;r++)this.event=e,this._all[r].apply(this,n)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var o=typeof e=="string"?e.split(this.delimiter):e.slice();u.call(this,s,o,this.listenerTree,0)}else s=this._events[e];if(typeof s=="function"){this.event=e;if(arguments.length===1)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];s.apply(this,n)}return!0}if(s){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];var a=s.slice();for(var r=0,t=a.length;r<t;r++)this.event=e,a[r].apply(this,n);return a.length>0||this._all}return this._all},o.prototype.on=function(e,t){if(typeof e=="function")return this.onAny(e),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||i.call(this),this.emit("newListener",e,t);if(this.wildcard)return a.call(this,e,t),this;if(!this._events[e])this._events[e]=t;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],t];else if(n(this._events[e])){this._events[e].push(t);if(!this._events[e].warned){var s=r;typeof this._events.maxListeners!="undefined"&&(s=this._events.maxListeners),s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},o.prototype.onAny=function(e){this._all||(this._all=[]);if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var s=typeof e=="string"?e.split(this.delimiter):e.slice();i=u.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var o=0;o<i.length;o++){var a=i[o];r=a._listeners;if(n(r)){var f=-1;for(var l=0,c=r.length;l<c;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){f=l;break}if(f<0)return this;this.wildcard?a._listeners.splice(f,1):this._events[e].splice(f,1),r.length===0&&(this.wildcard?delete a._listeners:delete this._events[e])}else if(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)this.wildcard?delete a._listeners:delete this._events[e]}return this},o.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||i.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0);for(var r=0;r<n.length;r++){var s=n[r];s._listeners=null}}else{if(!this._events[e])return this;this._events[e]=null}return this},o.prototype.listeners=function(e){if(this.wildcard){var t=[],r=typeof e=="string"?e.split(this.delimiter):e.slice();return u.call(this,t,r,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenersAny=function(){return this._all?this._all:[]},typeof define=="function"&&define.amd?define(function(){return o}):e.EventEmitter2=o}(typeof s!="undefined"&&typeof s.title!="undefined"&&typeof n!="undefined"?n:window)}),e.define("/lib/views/index.js",function(e,t,n,r,i,s,o){n.Viewer=e("./viewer").Viewer,n.Translator=e("./i18n").Translator}),e.define("/lib/views/viewer.js",function(e,t,n,r,i,s,o){var u=e("swig"),a=e("../views"),f=e("../core/types").Object,l=f.extend({__classvars__:{classname:"Viewer"},__init__:function(e,t){var n=this;n.eventer=e.eventer,n.eventer.emit("viewer.before_start",this),u.init({filters:t.filters}),n.templates={};for(name in t.templates)n.add_template(name,t.templates[name]);e.translator=new a.Translator({lang:t.lang,translations:t.translations}),n.eventer.emit("viewer.after_start",this)},add_template:function(e,t){this.templates[e]=u.compile(t,{filename:e})}});n.Viewer=l}),e.define("/node_modules/swig/package.json",function(e,t,n,r,i,s,o){t.exports={main:"index"}}),e.define("/node_modules/swig/index.js",function(e,t,n,r,i,s,o){function y(e){return{render:function(){return"<pre>"+e.stack+"</pre>"}}}function b(e,t){var r={compileFile:n.compileFile,blocks:{},type:l.TEMPLATE,id:t},i,s,o;if(m.allowErrors)r.tokens=l.parse.call(r,e,m.tags,m.autoescape);else try{r.tokens=l.parse.call(r,e,m.tags,m.autoescape)}catch(u){return new y(u)}return s=l.compile.call(r),o=new Function("_context","_parents","_filters","_","_ext",["_parents = _parents ? _parents.slice() : [];","_context = _context || {};","var j = _parents.length,",'    _output = "",',"    _this = this;","while (j--) {","   if (_parents[j] === this.id) {",'         return "Circular import of template " + this.id + " in " + _parents[_parents.length-1];',"   }","}","_parents.push(this.id);",s,"return _output;"].join("")),r.render=function(e,t){if(m.allowErrors)return o.call(this,e,t,m.filters,d,m.extensions);try{return o.call(this,e,t,m.filters,d,m.extensions)}catch(n){return new y(n)}},r}function w(e,t){var n=t.filename||e;return m.cache||t.cache?(g.hasOwnProperty(n)||(g[n]=b(e,n)),g[n]):b(e,n)}var u=e("fs"),a=e("path"),f=e("./lib/tags"),l=e("./lib/parser"),c=e("./lib/filters"),h=e("./lib/helpers"),p=e("./lib/dateformat"),d=e("underscore"),v={allowErrors:!1,autoescape:!0,cache:!0,encoding:"utf8",filters:c,root:"/",tags:f,extensions:{},tzOffset:0},m=d.extend({},v),g={};n.init=function(e){g={},m=d.extend({},v,e),m.filters=d.extend(c,e.filters),m.tags=d.extend(f,e.tags),p.defaultTZOffset=m.tzOffset},n.compileFile=function(e){var t,n;e[0]==="/"&&(e=e.substr(1));if(m.cache&&g.hasOwnProperty(e))return g[e];if(typeof window!="undefined")throw new y({stack:"You must pre-compile all templates in-browser. Use `swig.compile(template);`."});n=function(){var n=/^\//.test(e)||/^.:/.test(e)?e:m.root+"/"+e,r=u.readFileSync(n,v.encoding);t=w(r,{filename:e})};if(m.allowErrors)n();else try{n()}catch(r){t=new y(r)}return t},n.compile=function(e,t){t=t||{};var n=w(e,t||{});return function(e,t){return n.render(e,t)}}}),e.define("fs",function(e,t,n,r,i,s,o){}),e.define("/node_modules/swig/lib/tags.js",function(e,t,n,r,i,s,o){var u=e("underscore");u.extend(n,{autoescape:e("./tags/autoescape"),block:e("./tags/block"),"else":e("./tags/else"),"extends":e("./tags/extends"),filter:e("./tags/filter"),"for":e("./tags/for"),"if":e("./tags/if"),"import":e("./tags/import"),include:e("./tags/include"),macro:e("./tags/macro"),parent:e("./tags/parent"),raw:e("./tags/raw"),set:e("./tags/set")})}),e.define("/node_modules/swig/node_modules/underscore/package.json",function(e,t,n,r,i,s,o){t.exports={main:"underscore.js"}}),e.define("/node_modules/swig/node_modules/underscore/underscore.js",function(e,t,n,r,i,s,o){(function(){function L(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&T.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&T.isFunction(t.isEqual))return t.isEqual(e);var r=l.call(e);if(r!=l.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&L(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(T.has(e,u)){s++;if(!(o=T.has(t,u)&&L(e[u],t[u],n)))break}if(o){for(u in t)if(T.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,r=e._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype,a=s.slice,f=s.unshift,l=o.toString,c=o.hasOwnProperty,h=s.forEach,p=s.map,d=s.reduce,v=s.reduceRight,m=s.filter,g=s.every,y=s.some,b=s.indexOf,w=s.lastIndexOf,E=Array.isArray,S=Object.keys,x=u.bind,T=function(e){return new B(e)};typeof n!="undefined"?(typeof t!="undefined"&&t.exports&&(n=t.exports=T),n._=T):e._=T,T.VERSION="1.3.3";var N=T.each=T.forEach=function(e,t,n){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(r in e&&t.call(n,e[r],r,e)===i)return}else for(var o in e)if(T.has(e,o)&&t.call(n,e[o],o,e)===i)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=T.toArray(e).reverse();return r&&!i&&(t=T.bind(t,r)),i?T.reduce(s,t,n,r):T.reduce(s,t)},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,n){var r=!0;return e==null?r:g&&e.every===g?e.every(t,n):(N(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var C=T.some=T.any=function(e,t,n){t||(t=T.identity);var r=!1;return e==null?r:y&&e.some===y?e.some(t,n):(N(e,function(e,s,o){if(r||(r=t.call(n,e,s,o)))return i}),!!r)};T.include=T.contains=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=a.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t||e:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t=[],n;return N(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},T.sortBy=function(e,t,n){var r=T.isFunction(t)?t:function(e){return e[t]};return T.pluck(T.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},T.groupBy=function(e,t){var n={},r=T.isFunction(t)?t:function(e){return e[t]};return N(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},T.sortedIndex=function(e,t,n){n||(n=T.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},T.toArray=function(e){return e?T.isArray(e)?a.call(e):T.isArguments(e)?a.call(e):e.toArray&&T.isFunction(e.toArray)?e.toArray():T.values(e):[]},T.size=function(e){return T.isArray(e)?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return t!=null&&!n?a.call(e,0,t):e[0]},T.initial=function(e,t,n){return a.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return t!=null&&!n?a.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=function(e,t,n){return a.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})},T.flatten=function(e,t){return T.reduce(e,function(e,n){return T.isArray(n)?e.concat(t?n:T.flatten(n)):(e[e.length]=n,e)},[])},T.without=function(e){return T.difference(e,a.call(arguments,1))},T.uniq=T.unique=function(e,t,n){var r=n?T.map(e,n):e,i=[];return e.length<3&&(t=!0),T.reduce(r,function(n,r,s){if(t?T.last(n)!==r||!n.length:!T.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=T.intersect=function(e){var t=a.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=T.flatten(a.call(arguments,1),!0);return T.filter(e,function(e){return!T.include(t,e)})},T.zip=function(){var e=a.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=T.sortedIndex(e,t),e[r]===t?r:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},T.lastIndexOf=function(e,t){if(e==null)return-1;if(w&&e.lastIndexOf===w)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var k=function(){};T.bind=function(t,n){var r,i;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=a.call(arguments,2),r=function(){if(this instanceof r){k.prototype=t.prototype;var e=new k,s=t.apply(e,i.concat(a.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(a.call(arguments)))}},T.bindAll=function(e){var t=a.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(a.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},T.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},T.wrap=function(e,t){return function(){var n=[e].concat(a.call(arguments,0));return t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){return T.map(e,T.identity)},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={};return N(T.flatten(a.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},T.defaults=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e},T.isEqual=function(e,t){return L(e,t,[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType==1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},T.isArguments=function(e){return l.call(e)=="[object Arguments]"},T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),T.isFunction=function(e){return l.call(e)=="[object Function]"},T.isString=function(e){return l.call(e)=="[object String]"},T.isNumber=function(e){return l.call(e)=="[object Number]"},T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return e!==e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isDate=function(e){return l.call(e)=="[object Date]"},T.isRegExp=function(e){return l.call(e)=="[object RegExp]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=r,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){F(t,T[t]=e[t])})};var A=0;T.uniqueId=function(e){var t=A++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/.^/,M={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var _ in M)M[M[_]]=_;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,H=function(e){return e.replace(P,function(e,t){return M[t]})};T.template=function(e,t,n){n=T.defaults(n||{},T.templateSettings);var r="__p+='"+e.replace(D,function(e){return"\\"+M[e]}).replace(n.escape||O,function(e,t){return"'+\n_.escape("+H(t)+")+\n'"}).replace(n.interpolate||O,function(e,t){return"'+\n("+H(t)+")+\n'"}).replace(n.evaluate||O,function(e,t){return"';\n"+H(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,T);var s=function(e){return i.call(this,e,T)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},T.chain=function(e){return T(e).chain()};var B=function(e){this._wrapped=e};T.prototype=B.prototype;var j=function(e,t){return t?T(e).chain():e},F=function(e,t){B.prototype[e]=function(){var e=a.call(arguments);return f.call(e,this._wrapped),j(t.apply(T,e),this._chain)}};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];B.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],j(n,this._chain)}}),N(["concat","join","slice"],function(e){var t=s[e];B.prototype[e]=function(){return j(t.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}).call(this)}),e.define("/node_modules/swig/lib/tags/autoescape.js",function(e,t,n,r,i,s,o){t.exports=function(e,t,n){return n.compile.apply(this,[e,t])},t.exports.ends=!0}),e.define("/node_modules/swig/lib/tags/block.js",function(e,t,n,r,i,s,o){t.exports={ends:!0}}),e.define("/node_modules/swig/lib/tags/else.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.last(this.parent).name,i=a.clone(this.args),s,o,f;if(r==="for"){if(i.length)throw new Error('"else" tag cannot accept arguments in the "for" context.');return"} if (__loopLength === 0) {\n"}if(r!=="if")throw new Error('Cannot call else tag outside of "if" or "for" context.');return s=i.shift(),o=u.parseIfArgs(i,n),f="",s?(f+="} else if (\n",f+="    (function () {\n",a.each(o,function(e){e.hasOwnProperty("preout")&&e.preout&&(f+=e.preout+"\n")}),f+="return (\n",a.each(o,function(e){f+=e.value+" "}),f+=");\n",f+="    })()\n",f+=") {\n",f):e+"\n} else {\n"}}),e.define("/node_modules/swig/lib/helpers.js",function(e,t,n,r,i,s,o){function c(e,t){if(a.isArray(e))return"(true)";e=e.replace(/^this/,"_this.__currentContext");if(n.isLiteral(e))return"(true)";var r=e.split(/(\.|\[|\])/),i="",s=[],o=!1,u=!1;return typeof t=="string"&&t.length&&r.unshift(t),r=a.reject(r,function(e){return e===""}),a.each(r,function(e){if(e==="."){u=!0;return}if(e==="["){o=!0;return}if(e==="]"){o=!1;return}if(!i)i=e;else if(o)if(!n.isStringLiteral(e)){if(u){s[s.length-1]=a.last(s).replace(/\] !== "undefined"$/,"_"+e+'] !== "undefined"'),i=i.replace(/\]$/,"_"+e+"]");return}i+="[___"+e+"]"}else i+="["+e+"]";else i+="."+e;u=!1,s.push("typeof "+i+' !== "undefined"')}),"("+s.join(" && ")+")"}var u=e("./parser"),a=e("underscore"),f=e("./filters"),l=/^(Array|ArrayBuffer|Boolean|Date|Error|eval|EvalError|Function|Infinity|Iterator|JSON|Math|Namespace|NaN|Number|Object|QName|RangeError|ReferenceError|RegExp|StopIteration|String|SyntaxError|TypeError|undefined|uneval|URIError|XML|XMLList|break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with)(?=(\.|$))/;n.isStringLiteral=function(e){if(typeof e!="string")return!1;var t=e.substring(0,1),n=e.charAt(e.length-1,1),r;if(t===n&&(t==="'"||t==='"')){r=e.substr(1,e.length-2).split("").reverse().join("");if(t==="'"&&/'(?!\\)/.test(r)||n==='"'&&/"(?!\\)/.test(r))throw new Error("Invalid string literal. Unescaped quote ("+e[0]+") found.");return!0}return!1},n.isLiteral=function(e){var t=!1;return/^\d+([.]\d+)?$/.test(e)?t=!0:n.isStringLiteral(e)&&(t=!0),t},n.isValidName=function(e){return typeof e=="string"&&e.substr(0,2)!=="__"&&/^([$A-Za-z_]+[$A-Za-z_0-9]*)(\.?([$A-Za-z_]+[$A-Za-z_0-9]*))*$/.test(e)&&!l.test(e)},n.isValidShortName=function(e){return e.substr(0,2)!=="__"&&/^[$A-Za-z_]+[$A-Za-z_0-9]*$/.test(e)&&!l.test(e)},n.isValidBlockName=function(e){return/^[A-Za-z]+[A-Za-z_0-9]*$/.test(e)},n.check=c,n.escapeVarName=function(e,t){if(a.isArray(e))return a.each(e,function(r,i){e[i]=n.escapeVarName(r,t)}),e;e=e.replace(/^this/,"_this.__currentContext");if(n.isLiteral(e))return e;typeof t=="string"&&t.length&&(e=t+"."+e);var r="",i=e.split(/(\.|\[|\])/),s=!1,o=!1;return i=a.reject(i,function(e){return e===""}),a.each(i,function(e){if(e==="."){o=!0;return}if(e==="["){s=!0;return}if(e==="]"){s=!1;return}r?s?n.isStringLiteral(e)?r+="["+e+"]":o?r=r.replace(/\]$/,"_"+e+"]"):r+="[___"+e+"]":r+="."+e:r=e,o=!1}),r},n.wrapMethod=function(e,t,r){var i="(function () {\n",s;return e=e||'""',t?(s=t.args.split(","),s=a.map(s,function(e){var t,r=e.replace(/^\s+/,"");try{t="__"+u.parseVariable(r).name.replace(/\W/g,"_")}catch(s){return e}return n.isValidName(r)?(i+=n.setVar(t,u.parseVariable(r)),t):e}),s=s&&s.length?s.join(","):'""',i+="return ",i+=r?r+'["':"",i+=t.name,i+=r?'"]':"",i+=".call(this",i+=s.length?", "+s:"",i+=");\n",i+"})()"):e},n.wrapFilter=function(e,t){var r="",i="";return e=e||'""',t?(f.hasOwnProperty(t.name)&&(i=t.args?e+", "+t.args:e,r+=n.wrapMethod(e,{name:t.name,args:i},"_filters")),r):e},n.wrapFilters=function(e,t,r,i){var s=n.escapeVarName(e,r);return t&&t.length>0&&a.each(t,function(e){switch(e.name){case"raw":i=!1;return;case"e":case"escape":i=e.args||i;return;default:s=n.wrapFilter(s,e,"_filters")}}),s=s||'""',i&&(s="_filters.escape.call(this, "+s+", "+i+")"),s},n.setVar=function(e,t){var r="",i,s,o;return/\[/.test(t.name)&&(i=t.name.split(/(\[|\])/),s=[],o=!1,a.each(i,function(e){if(e==="")return;if(e==="["){o=!0;return}if(e==="]"){o=!1;return}o&&!n.isStringLiteral
(e)&&(r+=n.setVar("___"+e.replace(/\W/g,"_"),{name:e,filters:[],escape:!0}))})),r+="var "+e+' = "";\n'+"if ("+c(t.name)+") {\n"+"    "+e+" = "+n.wrapFilters(t.name,t.filters,null,t.escape)+";\n"+"} else if ("+c(t.name,"_context")+") {\n"+"    "+e+" = "+n.wrapFilters(t.name,t.filters,"_context",t.escape)+";\n"+"}\n",t.filters.length&&(r+=" else if (true) {\n",r+="    "+e+" = "+n.wrapFilters("",t.filters,null,t.escape)+";\n",r+="}\n"),r},n.parseIfArgs=function(e,t){var r=["==","<",">","!=","<=",">=","===","!==","&&","||","in","and","or"],i="Bad if-syntax in `{% if "+e.join(" ")+" %}...",s=[],o,u,f=0;a.each(e,function(e,l){var c=!1,h;/^\(/.test(e)&&(f+=1,e=e.substr(1),s.push({type:"separator",value:"("}));if(/^\![^=]/.test(e)||e==="not")e==="not"?e="":e=e.substr(1),s.push({type:"operator",value:"!"});if(/\)$/.test(e)){if(!f)throw new Error(i);e=e.replace(/\)$/,""),c=!0,f-=1}if(e==="in")u=s.pop(),o="inindex";else if(a.indexOf(r,e)!==-1){if(o==="operator")throw new Error(i);e=e.replace("and","&&").replace("or","||"),s.push({value:e}),o="operator"}else if(e!==""){if(o==="value")throw new Error(i);h=t.parseVariable(e),o==="inindex"?(s.push({preout:u.preout+n.setVar("__op"+l,h),value:"(((_.isArray(__op"+l+") || typeof __op"+l+' === "string") && _.indexOf(__op'+l+", "+u.value+") !== -1) || (typeof __op"+l+' === "object" && '+u.value+" in __op"+l+"))"}),u=null):s.push({preout:n.setVar("__op"+l,h),value:"__op"+l}),o="value"}c&&s.push({type:"separator",value:")"})});if(f>0)throw new Error(i);return s}}),e.define("/node_modules/swig/lib/parser.js",function(e,t,n,r,i,s,o){function m(e){return e.match(/^[\w\.]+/)[0]}function g(e){return e.replace(/\\/g,"\\\\")}function y(e){return g(e.replace(/^[\w\.]+\(|\)$/g,""))}function b(e,t){function u(e,n){var r=new RegExp("\\"+n+"$"),i=e,s="";while(!r.test(s)&&i<t.length)s+=" "+t[i],t[i]=null,i+=1;if(!r.test(s))throw new Error("Malformed arguments sent to tag.");return s.replace(/^ /,"")}t=f.map(t,g);var n=0,r=t.length,i,s,o=[];for(n;n<r;n+=1){i=t[n];if(i===null||/^\s+$/.test(i))continue;if(/^\"/.test(i)&&!/\"[\]\}]?$/.test(i)||/^\'/.test(i)&&!/\'[\]\}]?$/.test(i)||/^\{/.test(i)&&!/\}$/.test(i)||/^\[/.test(i)&&!/\]$/.test(i)){switch(i.substr(0,1)){case"'":s="'";break;case'"':s='"';break;case"[":s="]";break;case"{":s="}"}o.push(u(n,s));continue}o.push(i)}return o}var u=e("./helpers"),a=e("./filters"),f=e("underscore"),l=/^\{\{.*?\}\}$/,c=/^\{%[^\r]*?%\}$/,h=/^\{#[^\r]*?#\}$/,p=n.TEMPLATE=0,d=1,v=2;n.TOKEN_TYPES={TEMPLATE:p,LOGIC:d,VAR:v},n.parseVariable=function(e,t){if(!e)return{type:null,name:"",filters:[],escape:t};var n=[],r=e.replace(/^\{\{ *| *\}\}$/g,"").split("|"),i=r.shift(),s=0,o=r.length,u=null,a,l;/\(/.test(i)&&(u=y(i.replace(/^\w+\./,"")),i=m(i));for(s;s<o;s+=1)l=r[s],l&&(/^[\w\.]+\(/.test(l)||/\)$/.test(l))&&!/^[\w\.]+\([^\)]*\)$/.test(l)&&(r[s]+="|"+r[s+1],r[s+1]=!1);r=f.without(r,!1),s=0,o=r.length;for(s;s<o;s+=1)l=r[s],a=m(l),/\(/.test(l)?n.push({name:a,args:y(l)}):n.push({name:a,args:""});return{type:v,name:i,args:u,filters:n,escape:t}},n.parse=function(e,t,r){var i=e.replace(/(^\s+)|(\s+$)/g,"").split(/(\{%[^\r]*?%\}|\{\{.*?\}\}|\{#[^\r]*?#\})/),s=!!r,o=s,u=[[]],a=0,p=0,v=i.length,m=[],g,y,w,E,S,x,T,N,C=1,k=1,L=null,A,O=/^\{\% *raw *\%\}/,M=/\{\% *endraw *\%\}$/,D=!1,P=!1,H=!1,B=!1,j=!1;for(p;p<v;p+=1){w=i[p],k=C,L=w.match(/\n/g),P=!1,H=!1,B=!1,j=!1,L&&(C+=L.length);if(D!==!1&&!M.test(w)){D+=w;continue}if(w.length===0||h.test(w))continue;if(/^(\s|\n)+$/.test(w))w=w.replace(/ +/," ").replace(/\n+/,"\n");else if(l.test(w))w=n.parseVariable(w,s);else if(c.test(w)){if(M.test(w)){w=D+w.replace(M,""),D=!1,u[a].push(w);continue}if(O.test(w)){D=w.replace(O,"");continue}E=w.replace(/^\{%\s*|\s*%\}$/g,"").split(" "),E[0]==="-"&&(H=!0,E.shift()),N=E.shift(),f.last(E)==="-"&&(P=!0,E.pop());if(a>0&&/^end/.test(N)){A=f.last(u[u.length-2]);if("end"+A.name===N){A.name==="autoescape"&&(s=o),A.strip.end=H,A.strip.after=P,u.pop(),a-=1;continue}throw new Error('Expected end tag for "'+A.name+'", but found "'+N+'" at line '+C+".")}if(!t.hasOwnProperty(N))throw new Error("Unknown logic tag at line "+C+': "'+N+'".');N==="autoescape"&&(o=s,s=!E.length||E[0]==="true"?E.length>=2?E[1]:!0:!1),w={type:d,line:k,name:N,compile:t[N],parent:f.uniq(u[u.length-2]||[]),strip:{before:H,after:P,start:!1,end:!1}},w.args=b(w,E);if(t[N].ends){w.strip.after=!1,w.strip.start=P,u[a].push(w),u.push(w.tokens=[]),a+=1;continue}}u[a].push(w)}if(D!==!1)throw new Error('Missing expected end tag for "raw" on line '+k+".");if(a!==0)throw A=f.last(u[u.length-2]),new Error('Missing end tag for "'+A.name+'" that was opened on line '+A.line+".");return u[a]},n.compile=function w(e,t){var r="",i=[],s=[],o,a,l,c,h;return e=e||"",this.type===p&&(f.each(this.tokens,function(t,n){if(t.name==="extends"){a=t.args[0];if(!u.isStringLiteral(a)||t.args.length>1)throw new Error("Extends tag on line "+t.line+" accepts exactly one string literal as an argument.");if(n>0)throw new Error('Extends tag must be the first tag in the template, but "extends" found on line '+t.line+".");t.template=this.compileFile(a.replace(/['"]/g,"")),this.parent=t.template}else if(t.name==="block"){l=t.args[0];if(!u.isValidBlockName(l)||t.args.length!==1)throw new Error('Invalid block tag name "'+l+'" on line '+t.line+".");if(this.type!==p)throw new Error('Block "'+l+'" found nested in another block tag on line'+t.line+".");try{this.hasOwnProperty("parent")&&this.parent.blocks.hasOwnProperty(l)?this.blocks[l]=w.call(t,e+"  ",this.parent.blocks[l]):this.hasOwnProperty("blocks")&&(this.blocks[l]=w.call(t,e+"  "))}catch(r){throw new Error("Circular extends found on line "+t.line+' of "'+this.id+'"!')}}else if(t.name==="set"){s.push(t);return}i.push(t)},this),i.length&&i[0].name==="extends"&&(this.blocks=f.extend({},this.parent.blocks,this.blocks),this.tokens=s.concat(this.parent.tokens)),s=i=null),f.each(this.tokens,function(i,s){var o,a,l,c,m;if(typeof i=="string")return c=this.tokens[s-1],m=this.tokens[s+1],c&&c.strip&&c.strip.after&&(i=i.replace(/^\s+/,"")),m&&m.strip&&m.strip.before&&(i=i.replace(/\s+$/,"")),r+='_output += "'+g(i).replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/"/g,'\\"')+'";\n',r;if(typeof i!="object")return;i.type===v&&(o=i.name.replace(/\W/g,"_"),a=u.isLiteral(o)?'["'+o+'"]':"."+o,l=i.args&&i.args.length?i.args:"",r+='if (typeof _context !== "undefined" && typeof _context'+a+' === "function") {\n',h=u.wrapMethod("",{name:o,args:l},"_context"),r+='    _output = (typeof _output === "undefined") ? '+h+": _output + "+h+";\n",u.isValidName(o)&&(r+="} else if (typeof "+o+' === "function") {\n',h=u.wrapMethod("",{name:o,args:l}),r+='    _output = (typeof _output === "undefined") ? '+h+": _output + "+h+";\n"),r+="} else {\n",r+=u.setVar("__"+o,i),r+='    _output = (typeof _output === "undefined") ? __'+o+": _output + __"+o+";\n",r+="}\n");if(i.type!==d)return;if(i.name==="block"){if(this.type!==p)throw new Error('Block "'+i.args[0]+'" found nested in another block tag on line '+i.line+".");this.hasOwnProperty("blocks")&&(r+=this.blocks[i.args[0]])}else i.name==="parent"?r+=e+"  "+t:(i.strip.start&&i.tokens.length&&typeof i.tokens[0]=="string"&&(i.tokens[0]=i.tokens[0].replace(/^\s+/,"")),i.strip.end&&i.tokens.length&&typeof f.last(i.tokens)=="string"&&(i.tokens[i.tokens.length-1]=f.last(i.tokens).replace(/\s+$/,"")),r+=i.compile(e+"  ",t,n))},this),r}}),e.define("/node_modules/swig/lib/filters.js",function(e,t,n,r,i,s,o){var u=e("./helpers"),a=e("underscore"),f=e("./dateformat");n.add=function(e,t){return a.isArray(e)&&a.isArray(t)?e.concat(t):typeof e=="object"&&typeof t=="object"?a.extend(e,t):a.isNumber(e)&&a.isNumber(t)?e+t:e+t},n.addslashes=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.addslashes(t)}),e):e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},n.capitalize=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.capitalize(t)}),e):e.toString().charAt(0).toUpperCase()+e.toString().substr(1).toLowerCase()},n.date=function(e,t,n,r){var i=t.length,s=new f.DateZ(e),o,u=0,a="";n&&s.setTimezoneOffset(n,r);for(u;u<i;u+=1)o=t.charAt(u),f.hasOwnProperty(o)?a+=f[o](s,n,r):a+=o;return a},n["default"]=function(e,t){return typeof e=="undefined"||!e&&typeof e!="number"?t:e},n.escape=n.e=function(e,t){t=t||"html";if(typeof e=="string"){if(t==="js"){var n=0,r,i="";e=e.replace(/\\/g,"\\u005C");for(n;n<e.length;n+=1)r=e.charCodeAt(n),r<32?(r=r.toString(16).toUpperCase(),r=r.length<2?"0"+r:r,i+="\\u00"+r):i+=e[n];return i.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B")}return e.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return e},n.first=function(e){return typeof e=="object"&&!a.isArray(e)?"":typeof e=="string"?e.substr(0,1):a.first(e)},n.join=function(e,t){if(a.isArray(e))return e.join(t);if(typeof e=="object"){var n=[];return a.each(e,function(e,t){n.push(e)}),n.join(t)}return e},n.json_encode=function(e){return JSON.stringify(e)},n.last=function(e){return typeof e=="object"&&!a.isArray(e)?"":typeof e=="string"?e.charAt(e.length-1):a.last(e)},n.length=function(e){return typeof e=="object"?a.keys(e).length:e.length},n.lower=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.lower(t)}),e):e.toString().toLowerCase()},n.replace=function(e,t,n,r){var i=new RegExp(t,r);return e.replace(i,n)},n.reverse=function(e){return a.isArray(e)?e.reverse():e},n.striptags=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.striptags(t)}),e):e.toString().replace(/(<([^>]+)>)/ig,"")},n.title=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.title(t)}),e):e.toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},n.uniq=function(e){return a.uniq(e)},n.upper=function(e){return typeof e=="object"?(a.each(e,function(t,r){e[r]=n.upper(t)}),e):e.toString().toUpperCase()},n.url_encode=function(e){return encodeURIComponent(e)},n.url_decode=function(e){return decodeURIComponent(e)}}),e.define("/node_modules/swig/lib/dateformat.js",function(e,t,n,r,i,s,o){var u=e("underscore"),a={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},f={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}};n.defaultTZOffset=0,n.DateZ=function(){function i(e){return e<10?"0"+e:e}function s(){var e=i(Math.floor(Math.abs(t.timezoneOffset)/60)),n=i(Math.abs(t.timezoneOffset)-e*60),r=t.timezoneOffset<0?"+":"-",s=t.tzAbbreviation===undefined?"":" ("+t.tzAbbreviation+")";return"GMT"+r+e+n+s}var e={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"],string:["toLocaleString","toString","toTimeString"],zSet:["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setYear"],set:["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"],"static":["UTC","parse"]},t=this,r;t.date=t.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+(new Date).getTimezoneOffset()*6e4):arguments.length===1?new Date(new Date(arguments[0])):new Date,t.timezoneOffset=t.dateZ.getTimezoneOffset(),u.each(e.z,function(e){t[e]=function(){return t.dateZ[e]()}}),u.each(e.string,function(e){t[e]=function(){return t.dateZ[e].apply(t.dateZ,[]).replace(/GMT[+\-]\\d{4} \\(([a-zA-Z]{3,4})\\)/,s())}}),u.each(e["default"],function(e){t[e]=function(){return t.date[e]()}}),u.each(e["static"],function(e){t[e]=function(){return Date[e].apply(Date,arguments)}}),u.each(e.zSet,function(e){t[e]=function(){return t.dateZ[e].apply(t.dateZ,arguments),t.date=new Date(t.dateZ.getTime()-t.dateZ.getTimezoneOffset()*6e4+t.timezoneOffset*6e4),t}}),u.each(e.set,function(e){t[e]=function(){return t.date[e].apply(t.date,arguments),t.dateZ=new Date(t.date.getTime()+t.date.getTimezoneOffset()*6e4-t.timezoneOffset*6e4),t}}),n.defaultTZOffset&&this.setTimezoneOffset(n.defaultTZOffset)},n.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(e,t){return this.timezoneOffset=e,t&&(this.tzAbbreviation=t),this.dateZ=new Date(this.date.getTime()+this.date.getTimezoneOffset()*6e4-this.timezoneOffset*6e4),this}},n.d=function(e){return(e.getDate()<10?"0":"")+e.getDate()},n.D=function(e){return f.abbr[e.getDay()]},n.j=function(e){return e.getDate()},n.l=function(e){return f.full[e.getDay()]},n.N=function(e){var t=e.getDay();return t>=1?t+1:7},n.S=function(e){var t=e.getDate();return t%10===1&&t!==11?"st":t%10===2&&t!==12?"nd":t%10===3&&t!==13?"rd":"th"},n.w=function(e){return e.getDay()},n.z=function(e,t,r){var i=e.getFullYear(),s=new n.DateZ(i,e.getMonth(),e.getDate(),12,0,0),o=new n.DateZ(i,0,1,12,0,0);return s.setTimezoneOffset(t,r),o.setTimezoneOffset(t,r),Math.round((s-o)/864e5)},n.W=function(e){var t=new Date(e.valueOf()),n=(e.getDay()+6)%7,r;return t.setDate(t.getDate()-n+3),r=t.valueOf(),t.setMonth(0,1),t.getDay()!==4&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((r-t)/6048e5)},n.F=function(e){return a.full[e.getMonth()]},n.m=function(e){return(e.getMonth()<9?"0":"")+(e.getMonth()+1)},n.M=function(e){return a.abbr[e.getMonth()]},n.n=function(e){return e.getMonth()+1},n.t=function(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()},n.L=function(e){return(new Date(e.getFullYear(),1,29)).getDate()===29},n.o=function(e){var t=new Date(e.valueOf());return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},n.Y=function(e){return e.getFullYear()},n.y=function(e){return e.getFullYear().toString().substr(2)},n.a=function(e){return e.getHours()<12?"am":"pm"},n.A=function(e){return e.getHours()<12?"AM":"PM"},n.B=function(e){var t=e.getUTCHours(),n;return t=t===23?0:t+1,n=Math.abs(((t*60+e.getUTCMinutes())*60+e.getUTCSeconds())/86.4).toFixed(0),"000".concat(n).slice(n.length)},n.g=function(e){var t=e.getHours();return t===0?12:t>12?t-12:t},n.G=function(e){return e.getHours()},n.h=function(e){var t=e.getHours();return(t<10||12<t&&22>t?"0":"")+(t<12?t:t-12)},n.H=function(e){var t=e.getHours();return(t<10?"0":"")+t},n.i=function(e){var t=e.getMinutes();return(t<10?"0":"")+t},n.s=function(e){var t=e.getSeconds();return(t<10?"0":"")+t},n.O=function(e){var t=e.getTimezoneOffset();return(t<0?"-":"+")+(t/60<10?"0":"")+t/60+"00"},n.Z=function(e){return e.getTimezoneOffset()*60},n.c=function(e){return e.toISOString()},n.r=function(e){return e.toUTCString()},n.U=function(e){return e.getTime()/1e3}}),e.define("/node_modules/swig/lib/tags/extends.js",function(e,t,n,r,i,s,o){t.exports={}}),e.define("/node_modules/swig/lib/tags/filter.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.clone(this.args),i=r.shift(),s=r.length?r.join(", "):"",o="(function () {\n";return o+='    var _output = "";\n',o+=n.compile.apply(this,[e+"    ",t])+"\n",o+="    return _output;\n",o+="})()\n","_output += "+u.wrapFilter(o.replace(/\n/g,""),{name:i,args:s})+";\n"},t.exports.ends=!0}),e.define("/node_modules/swig/lib/tags/for.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.clone(this.args),i=r[0],s=r[1],o=n.parseVariable(r[2]),f="",l;e=e||"";if(typeof s!="undefined"&&s!=="in")throw new Error('Invalid syntax in "for" tag');if(!u.isValidShortName(i))throw new Error("Invalid arguments ("+i+') passed to "for" tag');if(!u.isValidName(o.name))throw new Error("Invalid arguments ("+o.name+') passed to "for" tag');return i=u.escapeVarName(i),l='loop.index = __loopIndex + 1;\nloop.index0 = __loopIndex;\nloop.revindex = __loopLength - loop.index0;\nloop.revindex0 = loop.revindex - 1;\nloop.first = (__loopIndex === 0);\nloop.last = (__loopIndex === __loopLength - 1);\n_context["'+i+'"] = __loopIter[loop.key];\n'+n.compile.apply(this,[e+"     ",t]),f='(function () {\n    var loop = {}, __loopKey, __loopIndex = 0, __loopLength = 0,        __ctx_operand = _context["'+i+'"],\n'+"        loop_cycle = function() {\n"+"            var args = _.toArray(arguments), i = loop.index0 % args.length;\n"+"            return args[i];\n"+"        };\n"+u.setVar("__loopIter",o)+"    else {\n"+"        return;\n"+"    }\n"+"    if (_.isArray(__loopIter)) {\n"+"        __loopIndex = 0; __loopLength = __loopIter.length;\n"+"        for (; __loopIndex < __loopLength; __loopIndex += 1) {\n"+"           loop.key = __loopIndex;\n"+l+"        }\n"+'    } else if (typeof __loopIter === "object") {\n'+"        __keys = _.keys(__loopIter);\n"+"        __loopLength = __keys.length;\n"+"        __loopIndex = 0;\n"+"        for (; __loopIndex < __loopLength; __loopIndex += 1) {\n"+"           loop.key = __keys[__loopIndex];\n"+l+"        }\n"+"    }\n"+'    _context["'+i+'"] = __ctx_operand;\n'+"})();\n",f},t.exports.ends=!0}),e.define("/node_modules/swig/lib/tags/if.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.clone(this.args),i=u.parseIfArgs(r,n),s="(function () {\n";return a.each(i,function(e){e.hasOwnProperty("preout")&&e.preout&&(s+=e.preout+"\n")}),s+="\nif (\n",a.each(i,function(e){s+=e.value+" "}),s+=") {\n",s+=n.compile.apply(this,[e+"    ",t]),s+="\n}\n",s+="})();\n",s},t.exports.ends=!0}),e.define("/node_modules/swig/lib/tags/import.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){if(this.args.length!==3)throw new Error("Import statements require three arguments: {% import [template] as [context] %}.");var r=a.clone(this.args),i=r[0],s=r[1],o=r[2],f="";if(!u.isLiteral(i)&&!u.isValidName(i))throw new Error('Invalid attempt to import "'+i+'".');if(s!=="as")throw new Error('Invalid syntax {% import "'+i+'" '+s+" "+o+" %}");return f+="_.extend(_context, (function () {\n",f+='var _context = {}, __ctx = {}, _output = "";\n'+u.setVar("__template",n.parseVariable(i))+"_this.compileFile(__template).render(__ctx, _parents);\n"+"_.each(__ctx, function (item, key) {\n"+'    if (typeof item === "function") {\n'+'        _context["'+o+'_" + key] = item;\n'+"    }\n"+"});\n"+"return _context;\n",f+="})());\n",f}}),e.define("/node_modules/swig/lib/tags/include.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.clone(this.args),i=r.shift(),s="_context",o=!1,f="",l;e=e||"";if(!u.isLiteral(i)&&!u.isValidName(i))throw new Error("Invalid arguments passed to 'include' tag.");if(r.length){a.last(r)==="only"&&(s="{}",r.pop()),r.length>1&&r[0]==="ignore"&r[1]==="missing"&&(r.shift(),r.shift(),o=!0);if(r.length&&r[0]!=="with")throw new Error("Invalid arguments passed to 'include' tag.");if(r[0]==="with"){r.shift();if(!r.length)throw new Error("Context for 'include' tag not provided, but expected after 'with' token.");l=r.shift(),s='_context["'+l+'"] || '+l}}return f="(function () {\n"+u.setVar("__template",n.parseVariable(i))+"\n"+"    var includeContext = "+s+";\n",o&&(f+="try {\n"),f+='    if (typeof __template === "string") {\n',f+="        _output += _this.compileFile(__template).render(includeContext, _parents);\n",f+="    }\n",o&&(f+="} catch (e) {}\n"),f+="})();\n",f}}),e.define("/node_modules/swig/lib/tags/macro.js",function(e,t,n,r,i,s,o){var u=e("underscore");t.exports=function(e,t,n){var r=u.clone(this.args),i=r.shift(),s="",o="";return r.length&&(s=JSON.stringify(r).replace(/^\[|\'|\"|\]$/g,"")),o+="_context."+i+" = function ("+s+") {\n",o+='    var _output = "";\n',o+=n.compile.apply(this,[e+"    ",t]),o+="    return _output;\n",o+="};\n",o},t.exports.ends=!0}),e.define("/node_modules/swig/lib/tags/parent.js",function(e,t,n,r,i,s,o){t.exports={}}),e.define("/node_modules/swig/lib/tags/raw.js",function(e,t,n,r,i,s,o){t.exports={ends:!0}}),e.define("/node_modules/swig/lib/tags/set.js",function(e,t,n,r,i,s,o){var u=e("../helpers"),a=e("underscore");t.exports=function(e,t,n){var r=a.clone(this.args),i=u.escapeVarName(r.shift(),"_context"),s;if(r.shift()!=="=")throw new Error('Invalid token "'+r[1]+'" in {% set '+r[0]+' %}. Missing "=".');return s=r[0],u.isLiteral(s)||/^\{|^\[/.test(s)||s==="true"||s==="false"?" "+i+" = "+s+";":(s=n.parseVariable(s)," "+i+" = "+"(function () {\n"+"    var _output;\n"+n.compile.apply({tokens:[s]},[e,t])+"\n"+"    return _output;\n"+"})();\n")}}),e.define("/lib/core/types.js",function(e,t,n,r,i,s,o){var u=e("./oop").Class;String.format=String.f=String.prototype.format=String.prototype.f=function(){var e=this,t=arguments.length;while(t--)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t]);return e};var a=u.extend({__classvars__:{classname:"Object",is_empty:function(e){for(key in e)return!1;return!0},is_own_property:function(e,t){return a.prototype.hasOwnProperty.call(e,t)},merge:function(e,t){for(key in e){var n=e[key];if(t&&t[key]){var r=t[key];n instanceof Array?r instanceof Array?n.concat(r):n.push(r):typeof n=="string"||typeof n=="number"||typeof n=="boolean"||a.is_empty(n)?e[key]=r:a.merge(n,r)}}var i=_.difference(_.keys(t),_.keys(e));return _.each(i,function(n){e[n]=t[n]}),e},format:String.prototype.format,namespace:function(e){var t=e.split("."),n=window,r="";for(var i=0,s=t.length;i<s;i++)r=t[i],n[r]=n[r]||{},n=n[r];return n}}}),f=a.extend({__classvars__:{is_singleton:!0,classname:"SingletonObject"}});n.Object=a,n.SingletonObject=f}),e.define("/lib/core/oop.js",function(e,t,n,r,i,s,o){function c(e){return!l||/\B\base\b/.test(e.toString())}function h(e,t,n){n===undefined?delete e[t]:e[t]=n}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:undefined}function d(e){f=!0;var t=new e;return f=!1,t}var u=n,a=u.Class,f=!1,l=function(){base()}.toString().indexOf("base")>0,v=function(){};v.noConflict=function(){try{h(u,"Class",a)}catch(e){u.Class=a}return v},v.extend=function(e){var t=this.prototype,n=d(this);n.baseclass=t;if(e.__include__)for(var r=0,i=e.__include__.length;r!=i;++r){var s=e.__include__[r];for(var o in s){var u=p(s,o);u!==undefined&&(n[o]=s[o])}}e.__classvars__=e.__classvars__||{};if(n.__classvars__)for(var a in n.__classvars__)if(!e.__classvars__[a]){var u=p(n.__classvars__,a);e.__classvars__[a]=u}for(var o in e){var u=p(e,o);if(o==="__include__"||u===undefined)continue;n[o]=typeof u=="function"&&c(u)?function(e,n){return function(){var r=p(this,"base");this.base=t[n];try{return e.apply(this,arguments)}finally{h(this,"base",r)}}}(u,o):u}var l=function(){if(f)return;if(e.__classvars__.is_singleton&&n.instance)return n.instance;var t=d(arguments.callee);return t.__init__&&("baseclass"in t&&"__init__"in t.baseclass&&t.baseclass.__init__.apply(t,arguments),t.__init__.apply(t,arguments)),t.class=l,e.__classvars__.is_singleton&&(n.instance=t),t};for(var a in e.__classvars__){var u=p(e.__classvars__,a);u!==undefined&&(l[a]=u)}var m="Class";return e.__classvars__.classname?m=e.__classvars__.classname:n.classname&&(m=n.classname),n.classname=m,l.prototype=n,l.constructor=l,l.extend=v.extend,l.withData=v.withData,l},v.withData=function(e){var t=d(this);for(var n in e){var r=p(e,n);r!==undefined&&(t[n]=r)}return t};var m=v.extend({__classvars__:{is_singleton:!0,classname:"Singleton"}});n.Class=v,n.Singleton=m}),e.define("/lib/views/i18n.js",function(e,t,n,r,i,s,o){var u=e("../core/types").SingletonObject,a=u.extend({__classvars__:{classname:"Translator"},__init__:function(e){this.lang=e.lang,this.translations=e.translations},translate:function(e){var t=this,n="",r=t.translations[t.lang];if(r){n=r[e];if(n&&arguments.length>1){var i=Array.prototype.slice.call(arguments,1);n=a.format.apply(n,i)}}return n||""}});n.Translator=a}),e.define("/lib/controllers/index.js",function(e,t,n,r,i,s,o){n.StateManager=e("./states").StateManager,n.Controller=e("./states").Controller}),e.define("/lib/controllers/states.js",function(e,t,n,r,s,o,u){var a=e("../core/types").SingletonObject,f=e("../core/types").Object,l=e("underscore"),c=a.extend({__classvars__:{classname:"StateManager"},__init__:function(e,t){var n=this;n.eventer=e.eventer,n.initial=t.initial,n.event_pattern="state_manager.{0}.{1}",n.states=[];for(name in t){if(name=="initial")continue;var r=t[name];if(r.classname=="Controller"){var i=r;l.isFunction(i)&&(i=new i);for(u in i){var s=i[u],o=n.event_pattern.f(name,u);l.isFunction(s)&&u!="class"&&n.eventer.on(o,s)}}else for(o in r){var u=n.event_pattern.f(name,o),s=r[o];if(typeof s=="string"){var a=s;s=function(e){e.transition(a)}}n.eventer.on(u,s)}n.states.push(name)}},start:function(){this.transition(this.initial)},get:function(e){var t=this;for(i=0;i<t.states.length;++i){var n=t.states[i];if(n==e)return n}},transition:function(e){var t=this,n=t.get(e);t.current&&t.event("exit"),t.current=n,t.event("enter")},event:function(e){var t=this,n=t.event_pattern.f(t.current,e);t.eventer.emit(n,t)}}),h=a.extend({__classvars__:{classname:"Controller"}});n.StateManager=c,n.Controller=h}),e.define("/node_modules/underscore/package.json",function(e,t,n,r,i,s,o){t.exports={main:"underscore.js"}}),e.define("/node_modules/underscore/underscore.js",function(e,t,n,r,i,s,o){(function(){function L(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&T.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&T.isFunction(t.isEqual))return t.isEqual(e);var r=l.call(e);if(r!=l.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&L(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(T.has(e,u)){s++;if(!(o=T.has(t,u)&&L(e[u],t[u],n)))break}if(o){for(u in t)if(T.has(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,r=e._,i={},s=Array.prototype,o=Object.prototype,u=Function.prototype,a=s.slice,f=s.unshift,l=o.toString,c=o.hasOwnProperty,h=s.forEach,p=s.map,d=s.reduce,v=s.reduceRight,m=s.filter,g=s.every,y=s.some,b=s.indexOf,w=s.lastIndexOf,E=Array.isArray,S=Object.keys,x=u.bind,T=function(e){return new B(e)};typeof n!="undefined"?(typeof t!="undefined"&&t.exports&&(n=t.exports=T),n._=T):e._=T,T.VERSION="1.3.3";var N=T.each=T.forEach=function(e,t,n){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(r in e&&t.call(n,e[r],r,e)===i)return}else for(var o in e)if(T.has(e,o)&&t.call(n,e[o],o,e)===i)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=T.toArray(e).reverse();return r&&!i&&(t=T.bind(t,r)),i?T.reduce(s,t,n,r):T.reduce(s,t)},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,n){var r=!0;return e==null?r:g&&e.every===g?e.every(t,n):(N(e,function(e,s,o){if(!(r=r&&t.call(n,e,s,o)))return i}),!!r)};var C=T.some=T.any=function(e,t,n){t||(t=T.identity);var r=!1;return e==null?r:y&&e.some===y?e.some(t,n):(N(e,function(e,s,o){if(r||(r=t.call(n,e,s,o)))return i}),!!r)};T.include=T.contains=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=a.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t||e:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t=[],n;return N(e,function(e,r,i){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},T.sortBy=function(e,t,n){var r=T.isFunction(t)?t:function(e){return e[t]};return T.pluck(T.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},T.groupBy=function(e,t){var n={},r=T.isFunction(t)?t:function(e){return e[t]};return N(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},T.sortedIndex=function(e,t,n){n||(n=T.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},T.toArray=function(e){return e?T.isArray(e)?a.call(e):T.isArguments(e)?a.call(e):e.toArray&&T.isFunction(e.toArray)?e.toArray():T.values(e):[]},T.size=function(e){return T.isArray(e)?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return t!=null&&!n?a.call(e,0,t):e[0]},T.initial=function(e,t,n){return a.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return t!=null&&!n?a.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=function(e,t,n){return a.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})},T.flatten=function(e,t){return T.reduce(e,function(e,n){return T.isArray(n)?e.concat(t?n:T.flatten(n)):(e[e.length]=n,e)},[])},T.without=function(e){return T.difference(e,a.call(arguments,1))},T.uniq=T.unique=function(e,t,n){var r=n?T.map(e,n):e,i=[];return e.length<3&&(t=!0),T.reduce(r,function(n,r,s){if(t?T.last(n)!==r||!n.length:!T.include(n,r))n.push(r),i.push(e[s]);return n},[]),i},T.union=function(){return T.uniq(T.flatten(arguments,!0))},T.intersection=T.intersect=function(e){var t=a.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=T.flatten(a.call(arguments,1),!0);return T.filter(e,function(e){return!T.include(t,e)})},T.zip=function(){var e=a.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=T.sortedIndex(e,t),e[r]===t?r:-1;if(b&&e.indexOf===b)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},T.lastIndexOf=function(e,t){if(e==null)return-1;if(w&&e.lastIndexOf===w)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var k=function(){};T.bind=function(t,n){var r,i;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=a.call(arguments,2),r=function(){if(this instanceof r){k.prototype=t.prototype;var e=new k,s=t.apply(e,i.concat(a.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(a.call(arguments)))}},T.bindAll=function(e){var t=a.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity
),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(a.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},T.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},T.wrap=function(e,t){return function(){var n=[e].concat(a.call(arguments,0));return t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){return T.map(e,T.identity)},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={};return N(T.flatten(a.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},T.defaults=function(e){return N(a.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e},T.isEqual=function(e,t){return L(e,t,[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType==1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},T.isArguments=function(e){return l.call(e)=="[object Arguments]"},T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),T.isFunction=function(e){return l.call(e)=="[object Function]"},T.isString=function(e){return l.call(e)=="[object String]"},T.isNumber=function(e){return l.call(e)=="[object Number]"},T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return e!==e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isDate=function(e){return l.call(e)=="[object Date]"},T.isRegExp=function(e){return l.call(e)=="[object RegExp]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=r,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){F(t,T[t]=e[t])})};var A=0;T.uniqueId=function(e){var t=A++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/.^/,M={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var _ in M)M[M[_]]=_;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,H=function(e){return e.replace(P,function(e,t){return M[t]})};T.template=function(e,t,n){n=T.defaults(n||{},T.templateSettings);var r="__p+='"+e.replace(D,function(e){return"\\"+M[e]}).replace(n.escape||O,function(e,t){return"'+\n_.escape("+H(t)+")+\n'"}).replace(n.interpolate||O,function(e,t){return"'+\n("+H(t)+")+\n'"}).replace(n.evaluate||O,function(e,t){return"';\n"+H(t)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(t)return i(t,T);var s=function(e){return i.call(this,e,T)};return s.source="function("+(n.variable||"obj")+"){\n"+r+"}",s},T.chain=function(e){return T(e).chain()};var B=function(e){this._wrapped=e};T.prototype=B.prototype;var j=function(e,t){return t?T(e).chain():e},F=function(e,t){B.prototype[e]=function(){var e=a.call(arguments);return f.call(e,this._wrapped),j(t.apply(T,e),this._chain)}};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];B.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],j(n,this._chain)}}),N(["concat","join","slice"],function(e){var t=s[e];B.prototype[e]=function(){return j(t.apply(this._wrapped,arguments),this._chain)}}),B.prototype.chain=function(){return this._chain=!0,this},B.prototype.value=function(){return this._wrapped}}).call(this)}),e.define("/index.js",function(e,t,n,r,i,s,o){typeof window!="undefined"&&(n=window);var u={};u.core=e("./lib/core"),u.views=e("./lib/views"),u.controllers=e("./lib/controllers"),n.fel=u}),e("/index.js")})();